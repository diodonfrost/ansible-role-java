---
# tasks file for install openjdk for Solaris

- name: Solaris 11 | Install java
  block:

  - name: Solaris 11 | Install openjre
    ansible.builtin.package:
      name: "{{ openjre_package }}"
      state: present
    when: openjre_install|bool

  - name: Solaris 11 | Install openjdk
    ansible.builtin.package:
      name: "{{ openjdk_package }}"
      state: present
    when: openjdk_install|bool

  when: ansible_distribution_version|int >= 11

- name: Solaris 10 | Install java
  block:

  - name: Solaris 10 | Install openjre
    community.general.pkgutil:
      name: "{{ openjre_package }}"
      state: present
    when: openjre_install|bool

  - name: Solaris 10 | Install openjdk
    community.general.pkgutil:
      name: "{{ openjdk_package }}"
      state: present
    when: openjdk_install|bool

  - name: Solaris 10 | Add java binary to path
    ansible.builtin.file:
      src: "/opt/csw/java/jre/jre{{ java_version }}/bin/java"
      dest: "/bin/java"
      state: link

  when: ansible_distribution_version|int < 11
